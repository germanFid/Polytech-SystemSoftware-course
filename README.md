## Сети в Linux: Руководство по освоению

**Цель:** Освоить основные принципы работы с сетями в Linux, включая настройку сетевых интерфейсов, IP-адресацию, маршрутизацию, DNS, а также базовое понимание сетевой безопасности.

**1. Сетевые интерфейсы:**

*   **Что сделать:** Научиться просматривать и настраивать сетевые интерфейсы.
*   **Команды:**
    *   `ip addr` или `ip a` - Отобразить информацию о сетевых интерфейсах (IP-адреса, MAC-адреса, статус).
    *   `ip link` - Отобразить информацию о физических сетевых устройствах (интерфейсах).
    *   `ifconfig <интерфейс>` - (Устаревший, но все еще используемый) Отобразить и настроить сетевые интерфейсы.  Рекомендуется использовать `ip`.
    *   `ip link set <интерфейс> up` - Включить сетевой интерфейс.
    *   `ip link set <интерфейс> down` - Выключить сетевой интерфейс.
    *   `ip addr add <IP-адрес>/<маска> dev <интерфейс>` - Назначить IP-адрес интерфейсу.
    *   `ip addr del <IP-адрес>/<маска> dev <интерфейс>` - Удалить IP-адрес с интерфейса.

*   **Важно:**
    *   Понять разницу между физическим именем интерфейса (например, `eth0`, `wlan0`) и его логическим именем.
    *   Знать, что MAC-адрес - это уникальный идентификатор сетевого устройства.
    *   Понимать, что IP-адрес - это логический адрес устройства в сети.

**2. IP-адресация:**

*   **Что сделать:** Освоить основы IP-адресации, включая IPv4 и IPv6.
*   **Концепции:**
    *   **IPv4:**
        *   IP-адрес (32 бита, обычно записывается в десятичном виде с точками, например, 192.168.1.10).
        *   Маска подсети (определяет, какая часть IP-адреса относится к сети, а какая к хосту).
        *   Классы сетей (A, B, C) - историческая концепция, сейчас используется CIDR.
        *   CIDR (Classless Inter-Domain Routing) - более гибкий способ указания маски подсети (например, /24).
        *   Приватные и публичные IP-адреса.
        *   NAT (Network Address Translation) - преобразование приватных IP-адресов в публичные.
    *   **IPv6:**
        *   IP-адрес (128 бит, записывается в шестнадцатеричном виде, разделенном двоеточиями).
        *   Преимущества IPv6 (больше адресного пространства, упрощенная настройка).
        *   Краткая запись IPv6-адресов.

*   **Команды:**
    *   `ip addr` - Отображает IP-адреса и маски подсети.
    *   `ping <IP-адрес>` - Проверить доступность хоста по IP-адресу.

**3. Маршрутизация:**

*   **Что сделать:** Научиться просматривать и настраивать таблицу маршрутизации.
*   **Концепции:**
    *   Таблица маршрутизации - список маршрутов, которые указывают, куда отправлять трафик для достижения определенных сетей.
    *   Маршрут по умолчанию (default gateway) - IP-адрес устройства, которому отправляется трафик, если нет более конкретного маршрута.

*   **Команды:**
    *   `ip route` или `route -n` - Отобразить таблицу маршрутизации.
    *   `ip route add default via <IP-адрес_шлюза>` - Добавить маршрут по умолчанию.
    *   `ip route del default via <IP-адрес_шлюза>` - Удалить маршрут по умолчанию.
    *   `ip route add <сеть>/<маска> via <IP-адрес_шлюза>` - Добавить статический маршрут.

**4. DNS (Domain Name System):**

*   **Что сделать:** Понять, как работает DNS и как настроить разрешение имен в Linux.
*   **Концепции:**
    *   DNS - система, преобразующая доменные имена (например, google.com) в IP-адреса.
    *   DNS-серверы - серверы, хранящие информацию о соответствии доменных имен и IP-адресов.
    *   `/etc/resolv.conf` - файл, содержащий список DNS-серверов, используемых системой.

*   **Команды:**
    *   `cat /etc/resolv.conf` - Показать список DNS-серверов.
    *   `ping <доменное_имя>` - Проверить доступность хоста по доменному имени (и заодно проверить работу DNS).
    *   `nslookup <доменное_имя>` - Запросить IP-адрес для доменного имени у DNS-сервера.
    *   `dig <доменное_имя>` - Более продвинутая утилита для запроса информации у DNS-серверов.

**5. Сетевые утилиты:**

*   **Что сделать:** Освоить основные сетевые утилиты для диагностики и мониторинга.
*   **Команды:**
    *   `ping <хост>` - Проверить доступность хоста.
    *   `traceroute <хост>` или `tracepath <хост>` - Показать маршрут до хоста.
    *   `netstat <опции>` или `ss <опции>` - Отобразить информацию о сетевых соединениях, портах и статистике.  Рекомендуется использовать `ss`, т.к. `netstat` устаревает.
        *   `ss -lnt` - Показать список прослушиваемых TCP-портов.
        *   `ss -a` - Показать все соединения.
    *   `tcpdump <опции> <фильтр>` - Захват и анализ сетевого трафика.  Требует прав администратора.
        *   `tcpdump -i <интерфейс> port 80` - Захватить трафик, проходящий через порт 80 (HTTP).

**6. Файрвол (Firewall):**

*   **Что сделать:** Понять основы работы файрвола и научиться настраивать его.
*   **Концепции:**
    *   Файрвол - система, контролирующая сетевой трафик на основе заданных правил.
    *   iptables - традиционный файрвол в Linux (более сложный в настройке).
    *   firewalld - более современный и удобный файрвол (рекомендуется для начинающих).
    *   Правила файрвола (разрешающие и запрещающие трафик).
    *   Зоны (firewalld) - предопределенные наборы правил для разных типов сетей (например, public, private, trusted).

*   **Команды (firewalld):**
    *   `sudo systemctl start firewalld` - Запустить firewalld.
    *   `sudo systemctl enable firewalld` - Включить firewalld при загрузке системы.
    *   `sudo firewall-cmd --state` - Показать статус firewalld.
    *   `sudo firewall-cmd --get-default-zone` - Показать зону по умолчанию.
    *   `sudo firewall-cmd --set-default-zone=<зона>` - Установить зону по умолчанию.
    *   `sudo firewall-cmd --list-all` - Показать настройки текущей зоны.
    *   `sudo firewall-cmd --zone=<зона> --add-port=<порт>/<протокол> --permanent` - Разрешить трафик для указанного порта и протокола.
    *   `sudo firewall-cmd --reload` - Перезагрузить правила firewalld (после внесения изменений).

**7. SSH (Secure Shell):**

*   **Что сделать:** Научиться безопасно подключаться к удаленным серверам по SSH.
*   **Концепции:**
    *   SSH - протокол, позволяющий устанавливать зашифрованное соединение с удаленным сервером.
    *   Аутентификация по паролю.
    *   Аутентификация по ключам (более безопасный способ).
    *   SSH-клиент и SSH-сервер.

*   **Команды:**
    *   `ssh <пользователь>@<IP-адрес>` - Подключиться к удаленному серверу по SSH.
    *   `ssh-keygen` - Создать пару ключей SSH.
    *   `ssh-copy-id <пользователь>@<IP-адрес>` - Скопировать открытый ключ на удаленный сервер для аутентификации без пароля.

**8. Базовое понимание сетевой безопасности:**

*   **Что сделать:**  Получить общее представление о сетевой безопасности и мерах защиты.
*   **Концепции:**
    *   Важность использования надежных паролей.
    *   Регулярное обновление программного обеспечения (для исправления уязвимостей).
    *   Использование файрвола.
    *   Ограничение доступа к портам и сервисам.
    *   Использование VPN (Virtual Private Network) для защиты трафика.
    *   Мониторинг сетевой активности.
